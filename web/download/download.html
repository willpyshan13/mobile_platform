<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>快速安装</title>
        <style>
            * { 
                margin: 0; 
                -webkit-font-smoothing: antialiased; 
            }
            body { 
                font-family: Helvetica, sans-serif; 
                font-size: 14px; 
            }
            .header {
                background: #f7f7f7;
                height: 100px;
            }
            .header-bottom {
                margin-top: -95px;
                background-image: url(data:image/png;base64,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);
                background-size: 100% 112px;
                height: 112px;
            }
            h2 { 
                padding-left: 40px; 
                font-weight: lighter; 
                margin: 0; 
                line-height: 100px; 
                font-size: 25px; 
                color: #a6a6a6; 
                text-transform: uppercase; 
            }
            h3 { 
                padding-left: 40px; 
                font-weight: lighter; 
                margin: 0; 
                line-height: 40px; 
            }
            h4 { 
                padding-left: 60px; 
                font-weight: lighter; 
                margin: 0; 
                line-height: 20px; 
                font-size: 14px; 
                color: #a6a6a6; 
            }
            .error-code { 
                margin-right: 10px; 
                color: #7b7b7b; 
            }
            .vendor {  
                background-image:url(""); 
            }
            .header .logo { 
                float: right; 
                margin-right: 40px; 
                margin-top: 30px; 
                background-size: 40px 40px; 
                width: 40px; 
                height: 40px;
                border-radius: 5px;
            }
            .wrapper { 
                max-width: 666px; 
                margin: 60px auto 60px; 
                padding: 0 20px; 
            }
            h1 { 
                color: #5c5c5c; 
                font-size: 24px; 
                text-align: center; 
            }
            .info-detail { 
                margin-top: 0; 
                font-family: Verdana, sans-serif; 
                color: #5c5c5c; 
                word-break: break-all; 
            }
            p { 
                margin-bottom: 10px; 
            }
            a { 
                color: #5c5c5c; 
            }
            .qrCode { 
                text-align: center; 
                color: #e3e3e3; 
                margin-bottom: 40px; 
            }
            .qrCode .logo { 
                margin: 0 auto 10px; 
                opacity: 1; 
                background-size: 256px 256px; 
                width: 256px; 
                height: 256px; 
                border-radius: 20px;
            }
        </style>  
    </head>

    <body>
		<script type="text/javascript">
		function getUrlParameter(name){
			name = name.replace(/[]/,"\[").replace(/[]/,"\[").replace(/[]/,"\\\]");
			var regexS = "[\\?&]"+name+"=([^&#]*)";
			var regex = new RegExp( regexS );
			var results = regex.exec(window.parent.location.href );
			if( results == null ) return ""; else {
				return results[1];
			}
		};
		
		function getAppInfo(token){
			var getRequest = new XMLHttpRequest();//创建请求对象
			getRequest.open("GET", "http://localhost:8081/renren-api/app/get?token="+token, true);//链接服务器
			getRequest.send();//发送请求
			getRequest.onreadystatechange = function () {
            if (getRequest.readyState === 4) {//请求已完成，且响应已就绪
                if (getRequest.status === 200) {//请求成功
                    var resultStr = getRequest.responseText//获取结果
                    var resultObj = JSON.parse(resultStr);//解析数据
					var appName = document.getElementById('appName');
					//替换标题
					appName.innerHTML = '<h2>'+resultObj.data.appName+'</h2>'
					var appLogo = document.getElementById('appLogo');
					appLogo.style.backgroundImage = 'url('+resultObj.data.logoUrl+')'
					
					var downloadQrcode = document.getElementById('download-qrcode');
					downloadQrcode.style.backgroundImage = 'url('+resultObj.data.logoUrl+')'
                    //替换二维码
					var downloadUrl = document.getElementById('downloadUrl');
					downloadUrl.innerHTML = '<a class="ipa" href="'+resultObj.data.downloadUrl+'"></a>'
					//替换下载按钮
					var downloadButton = document.getElementById('downloadButton');
					downloadButton.innerHTML = '<a class="install" href="'+resultObj.data.downloadUrl+'"></a>'
					//替换版本信息
					var detail = document.getElementById('detail');
					detail.innerHTML = '<h3>包信息</h3><h4>版本号: '+resultObj.data.version+' '+resultObj.data.version+'<br>备注: '+resultObj.data.updateLog+'<br></h4>'
                }
                else {
                    alert("错误码 : " + getRequest.status);
                }
            }
			}
		}
		var token = getUrlParameter('token')
		
		getAppInfo(token)
		</script>
        <div class="header"  >
            <div class="logo vendor" id="appLogo"></div>
			<div id="appName">
				<h2>${pkg_appname}</h2>
			</div>
            
        </div>
        <div class="header-bottom"></div>
        <div class="wrapper">
            <div class="qrCode">
                <div class="logo vendor" id="download-qrcode" >
                </div>
            
                <script type="text/javascript" src="./ipaQR.js"></script>
				<div id="downloadUrl">
					<a class="ipa" href="${pkg_ipa_url}"></a>
				</div>
                <div id="downloadButton">
                <a class="install" href="${pkg_ipa_url}"></a>
				</div>
            
            </div>

            <div class="info-detail" id="detail">
                <h3>
                    包信息
                </h3>
                <h4>
                    版本号: ${pkg_version} (${pkg_build_version})<br>
                    备注: ${pkg_comment}<br>
                </h4>
            </div>     
        </div>
    </body>
</html>
